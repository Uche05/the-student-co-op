{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto bg-white p-10 rounded-3xl shadow-sm border border-gray-100">
    <h2 class="text-3xl font-bold text-navy mb-2">Let's set your goal</h2>
    <p class="text-gray-500 mb-8">This helps us calculate your career gap.</p>

    <form id="onboardingForm" class="space-y-6">
        <div>
            <label class="block text-sm font-bold text-navy mb-2">What's your next step?</label>
            <select id="nextStep" class="w-full p-4 bg-gray-50 border rounded-xl outline-none focus:border-electricBlue">
                <option value="University">University</option>
                <option value="Apprenticeship">Apprenticeship</option>
                <option value="Gap Year">Gap Year</option>
            </select>
        </div>

        <div>
            <label class="block text-sm font-bold text-navy mb-2">Target Career Path</label>
            <select id="career" class="w-full p-4 bg-gray-50 border rounded-xl outline-none focus:border-electricBlue">
                <option value="Law">Law</option>
                <option value="Software Engineering">Software Engineering</option>
                <option value="Marketing">Marketing</option>
                <option value="Finance">Finance</option>
            </select>
        </div>

        <button type="button" onclick="saveOnboarding()" class="w-full bg-navy text-white py-4 rounded-xl font-bold hover:bg-blue-900 transition">Continue to Test</button>
    </form>
</div>

<script>
async function saveOnboarding() {
    const data = {
        nextStep: document.getElementById('nextStep').value,
        career: document.getElementById('career').value
    };

    const response = await fetch('/submit-onboarding', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
    });

    if (response.ok) {
        window.location.href = "/quiz"; // Move to the psychometric test
    }
}
</script>

{% endblock %}
